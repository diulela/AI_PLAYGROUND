---
name: competitor-screenshot-analysis
description: 产品需求全生命周期管理工作流：从竞品截图分析到需求清单，支持需求内容跨版本迭代演进，包含开发实现后的状态追踪。当用户提供竞品截图、要求竞品分析、需要产出/更新需求文档、进行版本规划、需求内容迭代、提供新竞品截图、实现某条需求（如"实现 REQ-XXX"）、或提到"竞品分析""需求清单""设计还原""迭代""版本规划""需求演进"时使用此技能。使用中文输出。
---

# 产品需求全生命周期工作流

从竞品截图分析到需求清单，支持需求内容跨版本持续迭代演进。

## 核心理念

**需求不是一次性产物，而是会生长的种子。在过程中你需要透过观察到的表象，洞察业务本质**

一条需求从诞生到成熟，经历的不只是状态变更（Backlog→Done），更重要的是**内容演进**：

```
v1.0 种子期：基础功能，满足核心场景
  ↓ 用户反馈 / 竞品更新 / 业务发展
v2.0 成长期：增强能力，覆盖更多场景
  ↓
v3.0 成熟期：完善细节，极致体验
```

同一条 REQ-007「密码设置」的内容演进示例：

| 版本 | 用户故事变化 | 验收标准变化 |
|------|-----------|-----------|
| v1.0 | 设置密码保护钱包 | 4 项规则校验 + 二次确认 |
| v2.0 | + 用更便捷的方式验证身份 | + 生物识别解锁 + 失败降级 |
| v3.0 | + 用硬件设备增强安全性 | + 硬件密钥支持 + 多因素认证 |

**需求编号不变，内容在深化。** 这才是产品迭代的本质。

## 生命周期总览

```
创建期                    迭代期                    交付期
─────────────────    ─────────────────    ─────────────────
阶段一 截图分析        阶段四 需求内容迭代    实现追踪
阶段二 设计规格   →    阶段五 新竞品输入      （开发完成→更新状态
阶段三 需求清单        阶段六 版本回顾与规划    →勾选验收标准）
     ↓ 版本规划             ↓ 回到阶段四
```

## 判断当前阶段

| 用户意图 | 进入阶段 |
|---------|---------|
| 提供竞品截图，要求分析 | 阶段一 |
| 要求产出设计规格/还原文档 | 阶段二 |
| 要求产出/重构需求清单 | 阶段三 |
| 要求规划某个版本要做什么 | 阶段三B |
| 要求深化/增强某个需求的内容 | 阶段四 |
| 提供新竞品截图，要求对比更新 | 阶段五 |
| 要求回顾版本交付、规划下一版 | 阶段六 |
| 实现某条需求（如"实现 REQ-XXX"） | 实现追踪 |
| 项目已有需求清单 | 先读取现有文档再判断 |

**关键**：每次操作前先检查项目中是否已有 `prd/` 目录和需求清单文件。如果有，先读取了解当前状态，不要重复创建。

---

## 创建期

### 阶段一：截图分析（四层分析法）

**触发**：用户提供竞品截图。先确认竞品名称、分析模块、产出受众。

四层递进分析，**严格禁止跳步**：

**第一层：观察** — 编号截图、按操作顺序排列、还原流程图（Mermaid）、识别页面类型。

**第二层：拆解** — 每张截图：布局结构（树形 wireframe）、组件清单（类型/位置/尺寸/颜色/字号/文案/状态）、视觉参数、文案逐字提取。颗粒度：没看过截图的设计师能画出 80% 相似的页面。

**第三层：理解** — 补充隐藏信息：交互状态、转场逻辑、设计决策、异常场景。

**第四层：输出** — 整理为文档。

### 阶段二：设计规格

产出到 `prd/design/`：
- `00-全局设计规范.md`：流程图、设计语言、共享组件、全局交互约定

**单页面**（截图覆盖 1~2 个独立页面）：
- `0N-页面名.md`：每份 7 章节（页面概述/布局结构/组件清单/交互状态/转场动效/异常场景/文案清单）

**多页面流程**（截图覆盖 ≥3 个独立页面，或单文件预计超过 500 行）：
- `0N-流程名/README.md`：流程概述（流程图、状态机、跨页转场、跨页异常、设计决策、迭代记录）
- `0N-流程名/01~NN-页面名.md`：每个页面一份，标准 7 章节

判断标准：
- 单独页面（如欢迎页、切换网络）→ 单文件
- 复杂单页面（如钱包主页，组件多但仍是一个页面）→ 单文件
- 多步流程（如转账：地址→金额→确认→结果→详情）→ 流程目录

### 阶段三：需求清单（五步编写法）

**提取** → **去重合并** → **补全** → **结构化** → **质检**

产出为**多文件结构**：

1. 创建 `prd/requirements/README.md`（索引文件）：文档说明、版本规划、用户流程、需求总表（链接到模块文件）
2. 按功能模块创建 `prd/requirements/modules/0N-模块名.md`，每个模块文件包含该模块的全部需求详情
3. 创建 `prd/requirements/appendix/竞品分析归档.md`（竞品设计亮点、逐屏分析索引、竞品对比表）

每条需求的标准格式：

```markdown
### REQ-XXX
**需求名称**

| 字段 | 内容 |
|------|------|
| 模块 | [所属模块] |
| 优先级 | P0/P1/P2 |
| 当前版本 | v1.0 |
| 来源 | 竞品参考 / 行业通用 / 自主创新 |
| 依赖 | REQ-YYY |
| 设计规格 | [链接] |

**用户故事**：作为[角色]，我希望[行为]，以便[价值]。

**验收标准（v1.0）**：
- [ ] 条件 1
- [ ] 条件 2

**演进路线**：
| 版本 | 演进方向 | 新增验收标准 |
|------|---------|------------|
| v2.0 | [预期增强方向] | [预期新增的验收条件] |
| v3.0 | [预期增强方向] | [预期新增的验收条件] |
```

**关键差异**：每条需求包含**演进路线**——在创建时就规划好这条需求未来会如何深化。演进路线不需要很精确，是方向性的规划，随迭代调整。

验收标准**带版本标签**（`v1.0`），后续迭代时追加新版本的标准，旧版本标准保留。

### 阶段三B：版本规划

1. 读取需求清单，统计优先级和依赖。
2. 按版本切片：v1.0=P0 最小闭环，v1.1=P1 体验优化，v1.2+=P2 差异化。
3. **同时规划需求深度**：哪些需求在 v1.0 只做基础版，在 v2.0 做增强版。

```markdown
## 版本规划

| 版本 | 主题 | 新增需求 | 内容迭代需求 |
|------|------|---------|------------|
| v1.0 | MVP 核心流程 | REQ-001~009 | — |
| v2.0 | 安全增强 | REQ-020 | REQ-007(+生物识别), REQ-013(+面容验证) |
| v3.0 | 生态扩展 | REQ-025 | REQ-001(+多链入口), REQ-015(+24词支持) |
```

"内容迭代需求"列表明了**哪些旧需求在这个版本要深化内容**。

---

## 迭代期

### 阶段四：需求内容迭代

**触发**：用户要求深化某条需求、增强某个功能、或下一个版本的需求规划。

这是整个工作流的核心价值——不只是加新需求，而是让现有需求的内容不断生长。

**操作步骤**：

#### 1. 识别迭代类型

| 迭代类型 | 说明 | 示例 |
|---------|------|------|
| 深化 | 同一场景做得更好 | 密码校验从 4 项规则 → 加入密码强度评分条 |
| 扩展 | 覆盖新场景 | 密码验证从仅密码 → 加入生物识别 |
| 重构 | 改变实现方式 | 助记词备份从手抄 → 加入加密云备份 |
| 优化 | 改善非功能性质量 | 助记词展示页加入截屏检测与拦截 |

#### 2. 更新需求详情

在现有需求详情中**追加新版本内容**，不覆盖旧版本：

```markdown
**验收标准（v1.0）**：
- [x] 密码输入框支持显隐切换
- [x] 4 项规则实时校验
- [x] 二次确认密码

**验收标准（v2.0 新增）**：
- [ ] 支持面容 ID / 指纹替代密码验证
- [ ] 设备不支持生物识别时回退到密码
- [ ] 生物识别失败 3 次后强制密码验证

**演进记录**：
| 版本 | 变更内容 | 变更原因 |
|------|---------|---------|
| v2.0 | 新增生物识别验证 | 用户反馈密码输入频繁，竞品 B 已支持 |
```

**规则**：
- 旧版本验收标准已完成的打勾 `[x]`，保留不删除
- 新版本验收标准追加在后面，带版本标签
- 演进记录说明"改了什么"和"为什么改"

#### 3. 更新设计规格（主文件 + 归档）

需求内容迭代时，对应的页面规格文档按「主文件 + 迭代记录 + 归档」策略更新：

1. **归档当前版本**：将主文件复制到 `prd/design/archive/0N-页面名-vX.X.md` 作为快照
2. **修改主文件**：在主文件中更新组件、交互状态、异常场景等内容
3. **更新版本号**：修改主文件头部的 `文档版本` 和 `最后更新` 字段
4. **追加迭代记录**：在主文件末尾的「迭代记录」章节追加变更条目（改了什么 + 为什么改）

主文件始终是最新版本，团队日常只看主文件；需要追溯历史时查阅 archive/。

#### 4. 更新需求总表

更新"当前版本"列，反映该需求最新的内容版本。

#### 5. 记录变更日志

### 阶段五：新竞品输入

**触发**：用户提供新竞品截图。

1. **执行阶段一**分析新截图。
2. **与现有需求交叉对比**：
   - 新功能 → 新增需求（阶段三）
   - 现有功能做得更好 → 触发内容迭代（阶段四）
   - 现有功能做法不同 → 评估是否值得迭代
3. **更新竞品对比表**：

```markdown
| 功能点 | 我方(当前版本) | 竞品A | 竞品B | 迭代计划 |
|-------|--------------|-------|-------|---------|
| 密码设置 | v1.0 基础4项 | 同 | +生物识别 | v2.0 跟进 |
```

### 阶段六：版本回顾与下一版规划

**触发**：一个版本结束，规划下一个。

1. **回顾本版本**：哪些需求的内容完成了迭代，哪些未完成。
2. **评估演进路线**：当初规划的演进方向是否仍然正确，是否需要调整。
3. **规划下一版本**：
   - 哪些需求要做内容迭代（深化/扩展/优化）
   - 哪些是全新需求
   - 更新版本规划表的"内容迭代需求"列
4. **更新需求的演进路线**：根据新的认知调整未来版本的演进方向。

### 实现追踪：开发完成后更新需求状态

**触发**：用户要求实现某条需求（如"实现 REQ-001"），或开发完成某条需求后。

**关键规则**：每次实现完需求的代码后，**必须**同步更新需求追踪文档，保持 Single Source of Truth。

**操作步骤**：

1. **更新总表状态**（`prd/requirements/README.md`）：将该需求的「状态」列从当前值推进到下一阶段
   - 状态流转：`Backlog → Design → Dev → QA → Done`
   - 开发完成时更新为 `Dev`，通过测试后更新为 `Done`
   - 同时填写「目标版本」列（如 `v1.0`）

2. **勾选验收标准**（`prd/requirements/modules/0N-模块名.md`）：将已实现的验收条件从 `- [ ]` 改为 `- [x]`
   - 逐条核对，只勾选确实已实现的条目
   - 未实现的保持 `- [ ]`

3. **验证一致性**：确保总表状态与模块文件中的验收标准勾选情况一致
   - 全部勾选 + 通过测试 → `Done`
   - 全部勾选但未测试 → `Dev`
   - 部分勾选 → 保持 `Dev`，在模块文件中注明进度

**示例**：
```markdown
# 总表更新
| REQ-001 | 创建钱包入口 | P0 | v1.0 | Dev | v1.0 | — |

# 模块文件更新
**验收标准（v1.0）**：
- [x] 首页展示"创建钱包"入口，带图标和箭头指示
- [x] 首页展示"导入钱包"入口，带图标和箭头指示
- [x] 点击"创建钱包"可跳转到用户协议页
- [x] 点击"导入钱包"可跳转到导入流程
- [x] 两个入口为列表卡片样式，点击有按压反馈
```

---

## 文档体系

```
项目根目录/
└── prd/                                 ← 产品文档根目录
    ├── design/                          ← 设计规格
    │   ├── 00-全局设计规范.md           ← 主文件始终为最新版本
    │   ├── 02~0N-页面规格.md            ← 单页面 → 单文件
    │   ├── 0N-流程名/                   ← 多页面流程 → 流程目录
    │   │   ├── README.md               ← 流程概述（流程图+状态机+跨页转场+设计决策）
    │   │   ├── 01-页面名.md            ← 每个页面一份，标准 7 章节
    │   │   ├── 02-页面名.md
    │   │   └── ...
    │   └── archive/                     ← 历史版本快照归档
    │       ├── 04-创建HD钱包-v1.0.md   ← v2.0 迭代前的 v1.0 快照
    │       └── ...
    ├── requirements/                    ← 需求清单（多文件结构）
    │   ├── README.md                    ← 索引：总表 + 版本规划 + 变更日志
    │   ├── modules/
    │   │   ├── 01-欢迎引导.md          ← 按功能模块拆分的需求详情
    │   │   ├── 02-协议合规.md
    │   │   ├── ...
    │   │   └── 0N-模块名.md
    │   └── appendix/
    │       ├── 竞品分析归档.md          ← 竞品设计亮点 + 逐屏分析索引
    │       └── 竞品对比表.md（可选）    ← 多竞品对比
    └── playbook/                        ← 方法论
        ├── 00-竞品截图分析方法论.md
        └── 01-需求清单编写方法论.md
```

### 需求清单结构（多文件）

**索引文件** `prd/requirements/README.md`：
```markdown
# [产品名] — 需求清单

## 文档说明（关联文档、字段说明、变更日志）
## 版本规划（含"内容迭代需求"列）
## 用户流程总览（Mermaid）
## 需求总表（按模块分组，链接到模块文件，含"当前版本"列）
## 附录链接
```

**模块文件** `prd/requirements/modules/0N-模块名.md`：
```markdown
# 模块N：模块名

> 所属需求清单：[README](../README.md)
> 需求范围：REQ-XXX ~ REQ-YYY

### REQ-XXX
  - 用户故事
  - 验收标准（按版本分段，旧版打勾保留）
  - 演进路线（未来版本的方向性规划）
  - 演进记录（历次迭代的变更内容和原因）
  - 依赖、设计规格链接
```

### 设计规格版本管理（主文件 + 迭代记录 + 归档）

设计规格文档采用「主文件始终为最新 + 旧版归档」策略：

1. **主文件**（如 `prd/design/04-创建HD钱包.md`）始终包含最新版本内容
2. **迭代时**：先将当前主文件快照复制到 `prd/design/archive/04-创建HD钱包-v1.0.md`，再修改主文件
3. **主文件头部**标注当前版本号和最后更新时间
4. **主文件末尾**追加「迭代记录」章节，记录每次变更内容

迭代记录格式：
```markdown
---
## 迭代记录

| 版本 | 日期 | 变更内容 | 变更原因 |
|------|------|---------|---------|
| v2.0 | 2026-XX-XX | 新增生物识别组件、修改验证弹窗交互 | REQ-013 内容迭代 v2.0 |
| v1.0 | 2026-02-10 | 初版，基于 TronLink 竞品截图分析 | 创建期产出 |
```

## 关键原则

1. **不跳步** — 截图先拆解视觉再抽象功能
2. **需求会生长** — 每条需求从诞生就规划演进路线，跨版本持续深化
3. **验收标准带版本** — 新版本追加，旧版本保留打勾，形成完整演进历史
4. **改了就记录** — 演进记录写清"改了什么"和"为什么改"
5. **设计规格同步迭代** — 需求内容变了，先归档旧版到 archive/，再更新主文件，追加迭代记录
6. **先读后写** — 每次操作前先读取现有文档，增量更新而非覆盖
7. **编号不复用** — 需求编号永不重复使用
8. **需求按模块拆分** — 需求清单不写在一个大文件里，按功能模块拆分到 `prd/requirements/modules/` 独立管理
9. **主文件即最新** — 设计规格主文件始终为最新版本，历史版本通过 archive/ 追溯
10. **大文件必拆** — 设计规格单文件超过 500 行或覆盖 ≥3 个独立页面时，拆分为流程目录（`0N-流程名/README.md` + 逐页文件）
11. **实现即追踪** — 每次实现完需求代码后，必须同步更新总表状态和模块文件中的验收标准勾选，保持需求文档与代码实现的一致性

## 详细参考

完整方法论文档见（如果项目中已存在）：
- [截图分析方法论](prd/playbook/00-竞品截图分析方法论.md) — 四层分析法详解
- [需求清单编写方法论](prd/playbook/01-需求清单编写方法论.md) — 五步编写法详解
